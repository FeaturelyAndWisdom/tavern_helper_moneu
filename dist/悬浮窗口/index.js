import{createPinia as e}from'https://testingcf.jsdelivr.net/npm/pinia/+esm';const t=Vue,n={class:'flex flex-col h-screen bg-gradient-to-br from-slate-900 to-slate-800 text-white overflow-hidden'},s={class:'window-header flex items-center justify-between px-4 py-3 bg-slate-800/80 border-b border-slate-700 cursor-move select-none'},a={class:'flex items-center gap-2'},r={class:'flex-1 overflow-auto p-4'},o={class:'space-y-4'},l={class:'bg-slate-700/50 rounded-lg p-4'},i={class:'grid grid-cols-2 gap-2'},c=['onClick'],d={class:'bg-slate-700/50 rounded-lg p-4'},m={class:'text-sm text-slate-400 space-y-1'},p={class:'bg-slate-700/50 rounded-lg p-4'},u=(0,t.defineComponent)({__name:'Window',setup(e){const u=(0,t.ref)(!1),f=(0,t.ref)(''),h=(0,t.ref)(null),g=(0,t.ref)(0),v=[{name:'刷新',icon:'fas fa-sync-alt',action:'refresh'},{name:'清空',icon:'fas fa-trash',action:'clear'},{name:'保存',icon:'fas fa-save',action:'save'},{name:'设置',icon:'fas fa-cog',action:'settings'}];function b(){h.value=SillyTavern.getCurrentChatId(),g.value=getLastMessageId()+1}function x(){f.value.trim()?(toastr.success(`已发送: ${f.value}`),f.value=''):toastr.warning('请输入内容')}return(0,t.onMounted)(()=>{b(),eventOn(tavern_events.CHAT_CHANGED,b),eventOn(tavern_events.MESSAGE_RECEIVED,b)}),(e,E)=>((0,t.openBlock)(),(0,t.createElementBlock)('div',n,[(0,t.createCommentVNode)(' 窗口标题栏 '),(0,t.createElementVNode)('div',s,[E[2]||(E[2]=(0,t.createElementVNode)('div',{class:'flex items-center gap-2'},[(0,t.createElementVNode)('i',{class:'fas fa-window-maximize text-blue-400'}),(0,t.createElementVNode)('span',{class:'font-semibold'},'悬浮窗口')],-1)),(0,t.createElementVNode)('div',a,[(0,t.createElementVNode)('button',{class:'w-6 h-6 flex items-center justify-center rounded hover:bg-slate-600 transition-colors',onClick:E[0]||(E[0]=e=>u.value=!(0,t.unref)(u))},[(0,t.createElementVNode)('i',{class:(0,t.normalizeClass)([(0,t.unref)(u)?'fas fa-chevron-down':'fas fa-chevron-up','text-xs'])},null,2)])])]),(0,t.createCommentVNode)(' 窗口内容区 '),(0,t.withDirectives)((0,t.createElementVNode)('div',r,[(0,t.createCommentVNode)(' 自定义内容区域 '),(0,t.createElementVNode)('div',o,[(0,t.createElementVNode)('div',l,[E[3]||(E[3]=(0,t.createElementVNode)('h3',{class:'text-sm font-medium text-slate-300 mb-2'},'快捷操作',-1)),(0,t.createElementVNode)('div',i,[((0,t.openBlock)(),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(v,e=>(0,t.createElementVNode)('button',{key:e.name,class:'px-3 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg text-sm transition-colors',onClick:t=>function(e){switch(e.action){case'refresh':b(),toastr.info('已刷新信息');break;case'clear':f.value='',toastr.info('已清空输入');break;case'save':toastr.success('保存成功');break;case'settings':toastr.info('设置功能待实现')}}(e)},[(0,t.createElementVNode)('i',{class:(0,t.normalizeClass)([e.icon,'mr-1'])},null,2),(0,t.createTextVNode)(' '+(0,t.toDisplayString)(e.name),1)],8,c)),64))])]),(0,t.createElementVNode)('div',d,[E[4]||(E[4]=(0,t.createElementVNode)('h3',{class:'text-sm font-medium text-slate-300 mb-2'},'信息面板',-1)),(0,t.createElementVNode)('div',m,[(0,t.createElementVNode)('p',null,'当前聊天: '+(0,t.toDisplayString)((0,t.unref)(h)??'无'),1),(0,t.createElementVNode)('p',null,'消息数量: '+(0,t.toDisplayString)((0,t.unref)(g)),1)])]),(0,t.createElementVNode)('div',p,[E[6]||(E[6]=(0,t.createElementVNode)('h3',{class:'text-sm font-medium text-slate-300 mb-2'},'输入区域',-1)),(0,t.withDirectives)((0,t.createElementVNode)('textarea',{'onUpdate:modelValue':E[1]||(E[1]=e=>(0,t.isRef)(f)?f.value=e:null),class:'w-full h-20 bg-slate-800 border border-slate-600 rounded-lg p-2 text-sm resize-none focus:outline-none focus:border-blue-500',placeholder:'在此输入内容...'},null,512),[[t.vModelText,(0,t.unref)(f)]]),(0,t.createElementVNode)('button',{class:'mt-2 w-full px-3 py-2 bg-green-600 hover:bg-green-500 rounded-lg text-sm transition-colors',onClick:x},[...E[5]||(E[5]=[(0,t.createElementVNode)('i',{class:'fas fa-paper-plane mr-1'},null,-1),(0,t.createTextVNode)(' 发送 ',-1)])])])])],512),[[t.vShow,!(0,t.unref)(u)]])]))}});$(()=>{const n=(0,t.createApp)(u).use(e()),s=$('<iframe>').attr({script_id:getScriptId(),frameborder:0,srcdoc:'<!DOCTYPE html> <html> <head> <link rel="stylesheet" href="https://testingcf.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"> <script src="https://testingcf.jsdelivr.net/gh/n0vi028/JS-Slash-Runner/lib/tailwindcss.min.js"><\/script> <script src="https://testingcf.jsdelivr.net/npm/jquery"><\/script> <script src="https://testingcf.jsdelivr.net/npm/jquery-ui/dist/jquery-ui.min.js"><\/script> <link rel="stylesheet" href="https://testingcf.jsdelivr.net/npm/jquery-ui/themes/base/theme.min.css"/> <script src="https://testingcf.jsdelivr.net/npm/jquery-ui-touch-punch"><\/script> <script src="https://testingcf.jsdelivr.net/npm/lodash"><\/script> <script src="https://testingcf.jsdelivr.net/gh/n0vi028/JS-Slash-Runner/src/iframe/adjust_iframe_height.js"><\/script> <style>*,::after,::before{box-sizing:border-box}body,html{margin:0!important;padding:0;overflow:hidden!important;max-width:100%!important}</style> </head> <html> </html></html>'}).css({position:'fixed',top:'100px',right:'20px',width:'320px',height:'400px',zIndex:9999,borderRadius:'12px',boxShadow:'0 8px 32px rgba(0, 0, 0, 0.3)'}).appendTo('body').on('load',function(){!function(e='head'){const t=$('<div>').attr('script_id',getScriptId()).append($('head > style',document).clone()).appendTo(e)}(this.contentDocument.head);const e=$(this.contentDocument.body);n.mount(e[0]),$(s).draggable({handle:'.window-header',containment:'window'})});appendInexistentScriptButtons([{name:'切换窗口',visible:!0}]),eventOn(getButtonEvent('切换窗口'),()=>{s.toggle()}),$(window).on('pagehide',()=>{n.unmount(),s.remove()})});
//# sourceMappingURL=index.js.map